@model List<Projet2_EasyFid.Models.MissionUser>
@{
    Layout = "_Layout";
    ViewBag.Title = "Création UserFeedback";
}

<h2>Page des Userfeedback</h2>

@using (Html.BeginForm("SeeCurrentUserFeedback", "Salarie", FormMethod.Post))
{
    @for (int i = 0; i < Model.Count; i++)
    {
        <div name=@Model[i].Mission.Name>
            <h3>@Model[i].Mission.Name</h3>
            @Html.HiddenFor(m => m[i].UserFeedbackId)
            @Html.HiddenFor(m => m[i].Id)
            @Html.Label("comment-" + i, "Commentaire sur la mission")
            @Html.TextAreaFor(m => m[i].UserFeedback.Comment, new { @Name = "comment" + i })
            @{
                TempData["tour"] = i;

                int gradeClientRelation = (Model[i].UserFeedback != null) ? Model[i].UserFeedback.GradeClientRelation : 0;
                int gradeMission = (Model[i].UserFeedback != null) ? Model[i].UserFeedback.GradeMission : 0;
                int gradeManager = (Model[i].UserFeedback != null) ? Model[i].UserFeedback.GradeManager : 0;
                int gradeUserComfort = (Model[i].UserFeedback != null) ? Model[i].UserFeedback.GradeUserComfort : 0;
            }
            <div name="missionGrade" id="missionGrade">
                @Html.Label("gradeMission-" + i, "Note Mission")
                @{
                    TempData["intKey"] = gradeMission;
                    TempData["category"] = "mission";
                }

                @Html.Partial("GoldenStars")
                @Html.TextBoxFor(m => m[i].UserFeedback.GradeMission, new { id = "mission" + i, @class = "hidden" })
            </div>

            <div name="managerGrade" id="managerGrade">
                @Html.Label("gradeManager-" + i, "Note Manager")
                @{
                    TempData["intKey"] = gradeManager;
                    TempData["category"] = "manager";
                }
                @Html.Partial("GoldenStars")
                @Html.TextBoxFor(m => m[i].UserFeedback.GradeManager, new { id = "manager" + i, @class = "hidden" })
            </div>

            <div name="clientRelationGrade" id="clientRelationGrade">
                @Html.Label("gradeClientRelation-" + i, "Note Relation Client")
                @{
                    TempData["intKey"] = gradeClientRelation;
                    TempData["category"] = "clientRelation";
                }
                @Html.Partial("GoldenStars")
                @Html.TextBoxFor(m => m[i].UserFeedback.GradeClientRelation, new { id = "clientRelation" + i, @class = "hidden" })
            </div>

            <div name="userComfortGrade" id="userComfortGrade">
                @Html.Label("gradeUserComfort-" + i, "Note Confort Utilisateur")
                @{
                    TempData["intKey"] = gradeUserComfort;
                    TempData["category"] = "userComfort";
                }
                @Html.Partial("GoldenStars")
                @Html.TextBoxFor(m => m[i].UserFeedback.GradeUserComfort, new { id = "userComfort" + i, @class = "hidden" })
            </div>
        </div>
    }
    <input type="submit" value="Valider" />
}

@section Scripts {
    <script src="/Scripts/GradeScript.js"></script>
}